<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Valentine c·ªßa Thanh Hi·∫øu v√† L·ªá Trinh</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap"
    />
    <style>
      /* Reset & thi·∫øt l·∫≠p chung */
      * {
        box-sizing: border-box;
      }
      body {
        background-color: pink;
        text-align: center;
        font-family: "Helvetica Neue", Arial, sans-serif;
        overflow: auto;
        margin: 0;
        /* H·ªó tr·ª£ safe-area cho c√°c thi·∫øt b·ªã iOS (bao g·ªìm iPhone 15 Pro) */
        padding: env(safe-area-inset-top, 0) env(safe-area-inset-right, 0)
          env(safe-area-inset-bottom, 0) env(safe-area-inset-left, 0);
      }
      img {
        max-width: 100%;
        height: auto;
      }
      /* Container ch√≠nh gi·ªõi h·∫°n chi·ªÅu r·ªông */
      .container {
        display: none;
        padding: 20px;
        max-width: 600px;
        margin: 0 auto;
      }
      /* Ti√™u ƒë·ªÅ */
      h1 {
        font-size: 36px;
        color: #e60073;
        font-family: "Dancing Script", cursive;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        animation: fadeIn 2s ease-in-out;
        margin: 10px 0;
      }
      .name-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin: 10px 0;
      }
      /* T√™n s·ª≠ d·ª•ng font c√°ch ƒëi·ªáu v√† m√†u s·∫Øc n·ªïi b·∫≠t */
      .name-container h2 {
        font-family: "Dancing Script", cursive;
        font-size: 26px;
        color: #8b0000;
        font-weight: bold;
        margin: 0;
      }
      .name-container img {
        width: 40px;
        animation: pulse 2s infinite;
      }
      /* Hi·ªáu ·ª©ng ƒë·∫øm ng√†y (d√†nh cho d√≤ng ng·∫Øn) */
      .typing {
        display: inline-block;
        overflow: hidden;
        white-space: nowrap;
        font-size: 22px;
        color: #800000;
        border-right: 2px solid #800000;
        max-width: 0;
        animation: typing 6s steps(30, end) forwards,
          blinkCursor 1s step-end infinite;
      }
      @keyframes typing {
        from {
          max-width: 0;
        }
        to {
          max-width: 100%;
        }
      }
      @keyframes blinkCursor {
        50% {
          border-color: transparent;
        }
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes floatingHeart {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        50% {
          transform: translateY(-20px);
        }
        100% {
          transform: translateY(0);
          opacity: 0;
        }
      }
      .heart-effect {
        position: absolute;
        font-size: 24px;
        color: red;
        animation: floatingHeart 3s linear infinite;
      }
      /* Thi·ªáp m·ªü ƒë·∫ßu */
      .card {
        position: absolute;
        left: -250px;
        top: 50%;
        transform: translateY(-50%);
        width: 200px;
        height: 130px;
        background-color: white;
        border: 3px solid red;
        border-radius: 10px;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        font-weight: bold;
        color: red;
        transition: all 2s ease-in-out;
        cursor: pointer;
      }
      .card.fly {
        left: 50%;
        transform: translate(-50%, -50%);
      }
      /* N√∫t ƒëi·ªÅu khi·ªÉn nh·∫°c d·∫°ng text */
      .music-control {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 15px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        font-size: 16px;
        color: #e60073;
      }
      /* Slideshow (s·ª≠ d·ª•ng display ƒë·ªÉ hi·ªÉn th·ªã ·∫£nh) */
      .slideshow {
        width: 90%;
        max-width: 600px;
        margin: 20px auto;
        overflow: hidden;
        position: relative;
        border: 3px solid red;
        border-radius: 10px;
      }
      .slideshow img {
        width: 100%;
        height: auto;
        display: none;
      }
      .slideshow img.active {
        display: block;
      }
      /* Love-message v·ªõi hi·ªáu ·ª©ng g√µ m√°y qua JS */
      #love-message {
        display: none;
        font-size: 22px;
        color: #800000;
        white-space: normal;
        word-wrap: break-word;
        margin: 20px auto;
        max-width: 90%;
        text-align: left;
        border-right: 2px solid #800000;
        overflow: hidden;
        /* Th·ª•t ƒë·∫ßu d√≤ng cho l·ªùi ch√∫c */
        text-indent: 1em;
      }
      /* Responsive cho thi·∫øt b·ªã nh·ªè */
      @media (max-width: 480px) {
        h1 {
          font-size: 30px;
        }
        .name-container h2 {
          font-size: 20px;
        }
        .typing {
          font-size: 18px;
        }
        .card {
          width: 150px;
          height: 100px;
          font-size: 16px;
        }
        .music-control {
          font-size: 14px;
          padding: 8px 12px;
        }
        .slideshow {
          width: 95%;
          margin: 15px auto;
          border-width: 2px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Nh·∫°c n·ªÅn (kh√¥ng c√≥ autoplay ƒë·ªÉ tr√°nh l·ªói tr√™n mobile; ph√°t khi m·ªü form) -->
    <audio id="background-music" autoplay loop>
      <source src="/nhac.mp3" type="audio/mpeg" />
    </audio>

    <!-- N√∫t b·∫≠t/t·∫Øt nh·∫°c d·∫°ng text -->
    <button id="music-toggle" class="music-control">T·∫Øt √¢m</button>

    <!-- Thi·ªáp m·ªü ƒë·∫ßu -->
    <div class="card">üíå M·ªü thi·ªáp</div>

    <!-- N·ªôi dung sau khi m·ªü thi·ªáp -->
    <div class="container">
      <h1>Ch√∫c m·ª´ng Valentine!</h1>
      <div class="name-container">
        <h2>Nguy·ªÖn Thanh Hi·∫øu</h2>
        <img src="./img/giphy.gif" alt="Tr√°i tim GIF" />
        <h2>L√™ Th·ªã L·ªá Trinh</h2>
      </div>

      <!-- ƒê·∫øm s·ªë ng√†y v·ªõi hi·ªáu ·ª©ng CSS (d√†nh cho d√≤ng ng·∫Øn) -->
      <h2 class="typing" id="day-counter">
        Ch√∫ng ta ƒë√£ b√™n nhau <span id="counter">0</span> ng√†y
      </h2>

      <div id="love-message"></div>

      <!-- Slideshow (s·∫Ω xu·∫•t hi·ªán sau 3.5 gi√¢y k·ªÉ t·ª´ khi m·ªü th∆∞) -->
      <div class="slideshow" id="slideshow">
        <img src="img/picture/slideshow1.jpg" alt="Slide 1" class="slide" />
        <img src="img/picture/slideshow2.jpg" alt="Slide 2" class="slide" />
        <img src="img/picture/slideshow3.jpg" alt="Slide 3" class="slide" />
        <img src="img/picture/slideshow4.jpg" alt="Slide 1" class="slide" />
        <img src="img/picture/slideshow5.jpg" alt="Slide 2" class="slide" />
        <img src="img/picture/slideshow6.jpg" alt="Slide 3" class="slide" />
        <img src="img/picture/slideshow7.jpg" alt="Slide 1" class="slide" />
        <img src="img/picture/slideshow8.jpg" alt="Slide 2" class="slide" />
        <img src="img/picture/slideshow9.jpg" alt="Slide 3" class="slide" />
        <img src="img/picture/slideshow10.jpg" alt="Slide 1" class="slide" />
        <img src="img/picture/slideshow11.jpg" alt="Slide 2" class="slide" />
        <img src="img/picture/slideshow12.jpg" alt="Slide 3" class="slide" />
      </div>

      <!-- Love-message: n·ªôi dung s·∫Ω ƒë∆∞·ª£c th√™m qua JS v·ªõi hi·ªáu ·ª©ng g√µ m√°y -->
    </div>

    <script>
      // H√†m ƒë·∫øm s·ªë ng√†y v·ªõi t·ªëc ƒë·ªô thay ƒë·ªïi theo t·ª´ng giai ƒëo·∫°n:
      function calculateTime() {
        const startDate = new Date(2023, 3, 18);
        const today = new Date();
        const totalDays = Math.floor(
          (today - startDate) / (1000 * 60 * 60 * 24)
        );
        const counterElement = document.getElementById("counter");

        function incrementCounter(counter) {
          if (counter <= totalDays) {
            counterElement.textContent = counter;
            let delay;
            if (counter < 100) {
              delay = 100; // Ch·∫≠m ·ªü 100 ng√†y ƒë·∫ßu
            } else if (totalDays - counter < 100) {
              delay = 100; // Ch·∫≠m ·ªü 100 ng√†y cu·ªëi
            } else {
              delay = 20; // Nhanh ·ªü gi·ªØa
            }
            setTimeout(() => incrementCounter(counter + 1), delay);
          }
        }
        incrementCounter(0);
      }

      // H√†m t·∫°o hi·ªáu ·ª©ng tr√°i tim bay
      function createHeartEffect() {
        setInterval(() => {
          const heart = document.createElement("div");
          heart.innerHTML = "‚ù§Ô∏è";
          heart.classList.add("heart-effect");
          document.body.appendChild(heart);
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.top = Math.random() * 100 + "vh";
          setTimeout(() => heart.remove(), 3000);
        }, 500);
      }

      // H√†m slideshow s·ª≠ d·ª•ng display ƒë·ªÉ hi·ªÉn th·ªã ·∫£nh
      function startSlideShow() {
        const slides = document.querySelectorAll(".slideshow .slide");
        let currentSlide = 0;
        slides[currentSlide].classList.add("active");
        setInterval(() => {
          slides[currentSlide].classList.remove("active");
          currentSlide = (currentSlide + 1) % slides.length;
          slides[currentSlide].classList.add("active");
        }, 3000);
      }

      // H√†m hi·ªáu ·ª©ng typewriter: g√µ t·ª´ng k√Ω t·ª± c·ªßa chu·ªói v√†o element
      function typeWriter(element, text, speed) {
        element.style.display = "block"; // Hi·ªán element
        element.innerHTML = ""; // X√≥a n·ªôi dung c≈©
        let i = 0;
        function type() {
          if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, speed);
          } else {
            element.style.borderRight = "none";
          }
        }
        type();
      }

      document.addEventListener("DOMContentLoaded", () => {
        const card = document.querySelector(".card");
        const music = document.getElementById("background-music");
        const musicToggle = document.getElementById("music-toggle");

        setTimeout(() => card.classList.add("fly"), 2000);

        card.addEventListener("click", () => {
          document.querySelector(".container").style.display = "block";
          card.style.display = "none";
          // Ph√°t nh·∫°c ngay khi m·ªü th∆∞
          music.play();
          // B·∫Øt ƒë·∫ßu ƒë·∫øm s·ªë ng√†y
          calculateTime();
          // Sau 3.5 gi√¢y, b·∫Øt ƒë·∫ßu slideshow
          setTimeout(startSlideShow, 3500);
          // Sau 5.5 gi√¢y, hi·ªÉn th·ªã l·ªùi ch√∫c v·ªõi hi·ªáu ·ª©ng g√µ m√°y
          setTimeout(() => {
            const fullMessage =
              "Em l√† ngu·ªìn c·∫£m h·ª©ng c·ªßa t·ª´ng nh·ªãp ƒë·∫≠p tr√°i tim anh; ch√∫c m·ª´ng Valentine, mong r·∫±ng t√¨nh y√™u c·ªßa ch√∫ng ta m√£i r·∫°ng ng·ªùi nh∆∞ nh·ªØng v√¨ sao tr√™n b·∫ßu tr·ªùi.";
            typeWriter(
              document.getElementById("love-message"),
              fullMessage,
              50
            );
          }, 5500);
          // T·∫°o hi·ªáu ·ª©ng tr√°i tim bay
          createHeartEffect();
        });

        musicToggle.addEventListener("click", () => {
          if (music.paused) {
            music.play();
            musicToggle.textContent = "T·∫Øt √¢m";
          } else {
            music.pause();
            musicToggle.textContent = "B·∫≠t √¢m";
          }
        });
      });
    </script>
  </body>
</html>
